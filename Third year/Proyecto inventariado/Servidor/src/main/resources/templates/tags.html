<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">

<title>Inventory</title>
<meta content="" name="description">
<meta content="" name="keywords">

<!-- Favicons -->
<link th:href="@{/assets/img/favicon.png}" rel="icon">
<link th:href="@{/assets/img/apple-touch-icon.png}"
	rel="apple-touch-icon">

<!-- Google Fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
	rel="stylesheet">

<!-- Vendor CSS Files -->
<link th:href="@{/assets/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/icofont/icofont.min.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/boxicons/css/boxicons.min.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/animate.css/animate.min.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/remixicon/remixicon.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/line-awesome/css/line-awesome.min.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/venobox/venobox.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/owl.carousel/assets/owl.carousel.min.css}" rel="stylesheet">
<link th:href="@{/assets/vendor/aos/aos.css}" rel="stylesheet">
<link th:href="@{/assets/css/datatables.min.css}" rel="stylesheet" />
<link th:href="@{/assets/css/jquery.dataTables.min.css}" rel="stylesheet" />
<link th:href="@{/assets/css/select2.min.css}" rel="stylesheet" />
<link th:href="@{/assets/css/select2-bootstrap4.css}" rel="stylesheet" />
<!-- Template Main CSS File -->
<link th:href="@{/assets/css/elegant-icons-style.css}" rel="stylesheet" />
<link th:href="@{/assets/css/font-awesome.min.css}" rel="stylesheet" />
<!-- Custom styles -->
<link th:href="@{/assets/css/style-responsive.css}" rel="stylesheet" />
<!-- Template Main CSS File -->
<link th:href="@{/assets/css/style5.css}" rel="stylesheet">
<link th:href="@{/assets/css/style.css}" rel="stylesheet">
<link th:href="@{/assets/css/style3.css}" rel="stylesheet">
<link th:href="@{/assets/css/bootstrap.min.css}">
<link th:href="@{/assets/css/bootstrap4-toggle.min.css}" rel="stylesheet">
<link th:href="@{/assets/css/sticky.css}" rel="stylesheet">
</head>

<body>

	<!-- ======= Header ======= -->
	<header id="header" class="fixed-top d-flex align-items-center ">
		<div
			class="container d-flex align-items-center justify-content-between">

			<div class="logo">
				<h1 class="text-light">
					<a th:href="@{/}">InventarisPro</a>
				</h1>
			</div>

			<nav class="nav-menu d-none d-lg-block">
				<ul>
					<li><a th:href="@{/app/}">Dashboard</a></li>
					<li><a th:href="@{/app/inventory}">Products</a></li>
					<li class="active"><a th:href="@{/app/inventory/tags/}">Tags</a></li>
					<li>
						<span th:if="${AlertAmmount != null}" th:text="${AlertAmmount}" class="badge badge-pill badge-primary" style="float:right;margin-bottom:-10px;z-index:9999;"></span>
						<a th:href="@{/app/alerts}">Alerts</a>
					</li>
					<li class="navbar navbar-expand-sm navbar-dark log-in"><a
						class="nav-link dropdown-toggle" href="#"
						data-bs-toggle="dropdown"> <img th:src="${Photo}" alt="Profile Image"
							class="img-responsive rounded-circle" width="25px" height="25px">
					</a>
						<ul class="dropdown-menu dropdown-menu-edited">
							<li><a th:href="@{/app/account}">Account</a></li>
							<div class="dropdown-divider"></div>
							<li><a class="dropdown-item" th:href="@{/logout}">Log
									out</a></li>
						</ul></li>

				</ul>
			</nav>
			<!-- .nav-menu -->

		</div>
	</header>
	<!-- End Header -->

	<main id="main">
		<!-- ======= Breadcrumbs ======= -->
		<section class="breadcrumbs">
			<div class="container">

				<div class="d-flex justify-content-between align-items-center">
					<h2>Tags</h2>
					<ol>
						<li><a th:href="@{/}">Home</a></li>
						<li><a th:href="@{/app}">App</a></li>
						<li><a th:href="@{/app/inventory}">Inventory</a></li>
						<li>Tags</li>
					</ol>
				</div>
			</div>
		</section>
		<!-- End Breadcrumbs -->

		<section class="inner-page">
			<div class="container espacio-abajo">
				<div class="row justify-content-md-center ">

					<!-- if user have tags -->
					<div th:if="${AllTags!=null and !AllTags.isEmpty()}">

						<!-- form to create new tags -->
						<form th:action="@{/app/inventory/tags}" method="post"
							class="tm-signup-form">
							<div class="text-end">
								<button type="button" class="btn btn-primary"
									data-toggle="modal" data-target="#exampleModalCenter">Add
									new tag</button>
								<div class="modal fade" id="exampleModalCenter" tabindex="-1"
									role="dialog" aria-labelledby="exampleModalCenterTitle"
									aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLongTitle">Add
													new tag</h5>
											</div>
											<div class="modal-body">
												<input type="text"
													class="form-control-lg form-control product-name" id="tag"
													name="tag" placeholder="Tag Name" required autofocus>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-light"
													data-dismiss="modal">Cancel</button>
												<button type="submit" class="btn btn-primary">Add</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>

						<div class="row ">

							<!-- list with tags -->
							<div class="col-3">
								<div class="list-group" id="list-tab" role="tablist">
									<th:block th:each="tag, index: ${AllTags}">
										<th:block th:with="len=${#strings.length(tag.nombre)}">
											<a
												class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
												th:id="'list-' + ${tag.id} + '-list'" data-toggle="tab"
												th:href="'#list-' + ${tag.id}" role="tab"> <th:block
													th:text="( ${len > 10} ) ? ${#strings.substring(tag.nombre,0,8)} + '…' : ${tag.nombre}"></th:block>

												<div class="btn-group pull-right">
													<button id="tagEdit" class="btn cancel btn-info"
														data-toggle="modal" data-target="#changeTagName"
														th:attr="onclick=|$('#button-${tag.id}').click()|">
														<i class="bx bx-edit"></i>
													</button>
													<button id="tagDelete"
														th:attr="onclick=|askBeforeDelete('../../../../app/inventory/tags/delete/${tag.id}')|"
														class="btn cancel btn-danger">
														<i class="bx bx-trash"></i>
													</button>
												</div>
											</a>
										</th:block>
										<th:block th:replace="_tagModal :: changeTagName(tag=${tag})"></th:block>
									</th:block>
								</div>
							</div>

							<!-- tabla -->
							<div class="col-9">
								<div class="tab-content" id="nav-tabContent">
									<th:block th:each="tag: ${AllTags}">
										<div class="tab-pane fade" th:id="'list-' + ${tag.id}"
											role="tabpanel">
											<div class="col-lg-12 mt-3"
												th:if="${AllProducts.productsWithTag(tag) != null and !AllProducts.productsWithTag(tag).isEmpty()}">
												<table id="" class="display" style="width: 100%">
													<thead>
														<tr>
															<th>Name</th>
															<th>Price</th>
															<th>Quantity</th>
															<th>Tags</th>
															<th>Options</th>
														</tr>
													</thead>

													<tbody>
														<tr
															th:each="producto: ${AllProducts.productsWithTag(tag)}">
															<th:block
																th:if="${(producto.getTags() != null and producto.getTags().contains(tag))}">

																<th:block
																	th:with="len=${#strings.length(producto.nombre)}">
																	<td th:title="${producto.nombre}"
																		th:text="( ${len > 15} ) ? ${#strings.substring(producto.nombre,0,15)} + '…' : ${producto.nombre}"></td>
																</th:block>

																<td><div th:text="${producto.precio}"></div></td>
																<td><div th:text="${producto.cantidad}"></div></td>
																<td><select class="form-control simple-select2"
																	style="width: 100%" multiple="multiple">
																		<th:block th:each="tag: ${producto.tags}">
																			<th:block
																				th:with="len=${#strings.length(tag.nombre)}">
																				<option class="w-auto" selected="selected"
																					th:text="( ${len > 10} ) ? ${#strings.substring(tag.nombre,0,10)} + '…' : ${tag.nombre}"></option>
																			</th:block>
																		</th:block>
																</select></td>
																<td>
																	<div class="btn-group">
																		<a class="btn btn-primary"
																			th:href="@{/app/inventory/item/edit/__${producto.id}__}"><i
																			class='bx bx-edit'></i></a> <a class="btn btn-danger"
																			th:href="@{/app/inventory/item/delete/__${producto.id}__}"
																			onclick="return confirm('you are going to delete this item, are you sure?')"><i
																			class='bx bx-trash'></i></a>
																	</div>
																</td>
															</th:block>
														</tr>
													</tbody>
												</table>
											</div>

											<!-- if products wont have tag -->
											<div
												th:unless="${AllProducts.productsWithTag(tag) != null and !AllProducts.productsWithTag(tag).isEmpty()}">
												<div class="text-center">
													<span class="iconify" data-icon="system-uicons:box-open"
														data-inline="false" data-width="180"></span>
													<h2>Aww Snap!</h2>
													<p>There is no item here, try to create one or add a
														tag to one already created on the previous page.</p>
												</div>
											</div>
										</div>
									</th:block>
								</div>
							</div>

						</div>
					</div>

					<!-- if user wont have tags -->
					<div th:unless="${AllTags!=null and !AllTags.isEmpty()}">

						<form th:action="@{/app/inventory/tags}" method="post"
							class="tm-signup-form">
							<div class="text-center">
								<i class='bx ri-price-tag-3-line ri-6x bx-tada'></i>
								<h2>You don't have any tags</h2>
								<p>Click add new tag to get started!</p>
								<button type="button" class="btn btn-primary"
									data-toggle="modal" data-target="#exampleModalCenter">Add
									new tag</button>
								<div class="modal fade" id="exampleModalCenter" tabindex="-1"
									role="dialog" aria-labelledby="exampleModalCenterTitle"
									aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLongTitle">Add
													new tag</h5>
											</div>
											<div class="modal-body">
												<input type="text"
													class="form-control-lg form-control product-name" id="tag"
													name="tag" placeholder="Tag Name" required autofocus>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-light"
													data-dismiss="modal">Cancel</button>
												<button type="submit" class="btn btn-primary">Add</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>

				</div>
			</div>
		</section>

	</main>
	<!-- End #main -->

	<!-- ======= Footer ======= -->
	<footer class="footer" id="footer">
		<div class="container">
			<h3>InventarisPro</h3>
			<p>Et aut eum quis fuga eos sunt ipsa nihil. Labore corporis
				magni eligendi fuga maxime saepe commodi placeat.</p>
			<div class="social-links">
				<a href="#" class="twitter"><i class="bx bxl-twitter"></i></a> <a
					href="#" class="facebook"><i class="bx bxl-facebook"></i></a> <a
					href="#" class="instagram"><i class="bx bxl-instagram"></i></a> <a
					href="#" class="google-plus"><i class="bx bxl-skype"></i></a> <a
					href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
			</div>
			<div class="copyright">
				&copy; Copyright <strong><span>InventarisPro</span></strong>. All
				Rights Reserved
			</div>
			<div class="credits">Designed by BootstrapMade</div>
		</div>
	</footer>
	<!-- End Footer -->

	<a href="#" class="back-to-top"><i class="ri-arrow-up-line"></i></a>

	<!-- Vendor JS Files -->
	<script th:src="@{/assets/vendor/jquery/jquery.min.js}"></script>
	<script th:src="@{/assets/js/jquery.min.js}"></script>
	<script th:src="@{/assets/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/assets/vendor/jquery.easing/jquery.easing.min.js}"></script>
	<script th:src="@{/assets/vendor/php-email-form/validate.js}"></script>
	<script th:src="@{/assets/vendor/isotope-layout/isotope.pkgd.min.js}"></script>
	<script th:src="@{/assets/vendor/venobox/venobox.min.js}"></script>
	<script th:src="@{/assets/vendor/owl.carousel/owl.carousel.min.js}"></script>
	<script th:src="@{/assets/vendor/aos/aos.js}"></script>

	<!-- Template Main JS File -->
	<script th:src="@{/assets/js/main2.js}"></script>
	<script th:src="@{/assets/js/login.js}"></script>
	<script th:src="@{/assets/js/bootstrap-notify.js}"></script>
	<script th:src="@{/assets/js/bootstrap4-toggle.min.js}"></script>
	<script th:src="@{/assets/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/assets/js/functions.js}"></script>
	<script th:src="@{/assets/js/bootstrap-notify.js}"></script>
	<script th:src="@{/assets/js/bootstrap4-toggle.min.js}"></script>
	<script th:src="@{/assets/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/assets/js/bootstrap-select.min.js}"></script>
	<script th:src="@{/assets/js/select2.full.min.js}"></script>
	<script th:src="@{/assets/js/dataTables.min.js}"></script>
	<script th:src="@{/assets/js/vfs_fonts.min.js}"></script>
	<script th:src="@{/assets/js/pdfmake.min.js}"></script>
	<script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>

</body>

</html>